---
title: 2019年10月9日 日报 
teaser: 让努力成为一种习惯
tags: [markdown, workflow, foss]
---
## redis       
        事务处理:
        multi命令:标记一个事务的开始,
        exec命令:执行所有事务块内的命令
        例子:
        multi
        sadd fei 漂亮
        sadd fei 美
        exec

        discard命令:取消事务,放弃事务块内的命令
        错误处理:
        在你放入事务中的命令,语法上没错,但是执行时出错了,这样的事务会被提交
        放到事务中的命令,在语法上没错,执行时有错,这个事务是会被执行 额
        例子:放弃事务
        multi
        sadd fei 漂亮
        sadd fei 美
        discard
        事务处理中的watch机制
        也叫做Redis观察机制,它是为了避免事务执行的时候,事务不安全问题,
        watch命令:使用watch机制时,要先监视事务可能会修改的key,如果在执行事务之前key被修改,那么就将事务打断
        unwatch命令:取消watch命令对所有key的监视,如果在exec命令或discard命令执行后,所有的监视将被自动取消,不用再执行unwatch命令


        持久化:两种方式rdb和aof
        rdb是指定时间间隔,将内存中的数据快照到硬盘当中,再使用时再读取到内存当中
        aof是将每接受到一条改变数据的命令时,他将把命令写到一个aof文件中,当redis重启时候,它将aof文件所有命令执行一遍来恢复数据.(只记录写操作,不记录读操作)


        主从复制:
        用途:在快速解决故障,让redis快速恢复服务
        提高服务器处理请求的能力
        设置主从后,主服务器中的数据也会拷贝到从服务器上
        实现读写分离

        主从:主负责写,从负责读
        info replication命令:可以查看主从关系	
        以下可以看出,主的端口号是6380,处于up状态
        主从建立后,主端口可以进行读写,然是从端口只能进行读不能进行写操作